{
  "permissions": {
    "allow": [
      "Bash(make format)",
      "Bash(make fix)",
      "Bash(make lint)",
      "Bash(make check)",
      "Bash(make ruff-fix)",
      "Bash(./execute_tests.sh*)",
      "Bash(git diff*)",
      "Bash(git log*)",
      "Bash(git status)",
      "Bash(git add*)",
      "Bash(git commit*)",
      "Bash(git checkout*)",
      "Bash(git branch*)",
      "Bash(git push origin*)",
      "Bash(gh pr create*)",
      "Bash(gh pr view*)",
      "Bash(python scripts/jira_tool.py list*)",
      "Bash(python scripts/jira_tool.py get*)",
      "Bash(python scripts/jira_tool.py create*)",
      "Bash(python scripts/jira_tool.py update*)",
      "Bash(python scripts/jira_tool.py comment*)",
      "Bash(python scripts/jira_tool.py transition*)",
      "Bash(poetry run python -m app.main*)",
      "Bash(poetry run flask --app app.main*)",
      "Bash(poetry run pytest*)",
      "Bash(poetry install*)",
      "Bash(poetry add*)",
      "Bash(poetry show*)",
      "Bash(npm run build*)",
      "Bash(npm run dev*)",
      "Bash(npm run lint*)",
      "Bash(npm install*)",
      "Bash(npm ci)"
    ],
    "deny": [
      "Bash(rm -rf*)",
      "Bash(git push --force*)",
      "Bash(git push --force-with-lease*)",
      "Bash(git reset --hard*)",
      "Bash(pip install*)",
      "Read(**/.env)"
    ]
  },
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "cmd=$(echo \"$CLAUDE_TOOL_INPUT\" | python3 -c \"import sys,json; d=json.load(sys.stdin); print(d.get('command',''))\" 2>/dev/null || echo ''); echo \"$cmd\" | grep -qE '\\.env([^.a-zA-Z]|$)' && echo '{\"decision\":\"block\",\"reason\":\"Прямой доступ к .env заблокирован. Используй os.environ или python-dotenv в коде.\"}' || true"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Edit|Write|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "make format"
          }
        ]
      }
    ]
  },
  "language": "ru"
}
